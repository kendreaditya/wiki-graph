(this["webpackJsonpwiki-graph"]=this["webpackJsonpwiki-graph"]||[]).push([[0],{56:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),i=n.n(c),u=n(14),o=n.n(u),s=n(15),p=n(21),l=n(12),f=n(27),h=(n(30),"https://en.wikipedia.org/w/api.php");function d(e){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(o.a.mark((function e(t){var n,r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(p.a)(o.a.mark((function e(){var t,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=r.length>0&&void 0!==r[0]?r[0]:null)&&(a+="&plcontinue=".concat(t)),e.next=4,fetch(a).then((function(e){return e.json()})).then((function(e){Object.keys(e.query.pages).forEach((function(t){n.push({pageid:t,title:e.query.pages[t].title})})),e.continue})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return i.apply(this,arguments)},n=[],r={action:"query",pageids:t,generator:"links",format:"json",gpllimit:"20",inprop:"url"},a=h+"?origin=*",Object.keys(r).forEach((function(e){a+="&"+e+"="+r[e]})),e.next=8,c();case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=n(36),O=n(107),x=n(106),v=n(108),g=(n(56),n(10));function w(e){var t=e.setGraphData,n=null,c=null,i=a.a.useState(null),u=Object(l.a)(i,2),o=u[0],s=u[1],p=a.a.useState([]),f=Object(l.a)(p,2),d=f[0],j=f[1];return Object(r.useEffect)((function(){o&&function(e){var t={action:"query",list:"search",srsearch:e,format:"json"},n=h+"?origin=*";return Object.keys(t).forEach((function(e){n+="&"+e+"="+t[e]})),fetch(n).then((function(e){return e.json()})).catch((function(e){return e}))}(o).then((function(e){return j(e.query.search)}))}),[o]),Object(g.jsxs)("ul",{id:"tool-bar",children:[Object(g.jsx)("li",{id:"search-bar",children:Object(g.jsx)(v.a,{value:n,onChange:function(e,t){n=t},options:d,getOptionLabel:function(e){return"string"===typeof e?e:e.title},style:{width:300,float:"right"},freeSolo:!0,renderInput:function(e){return Object(g.jsx)(O.a,Object(b.a)(Object(b.a)({autoFocus:!0},e),{},{label:"wikipedia article",variant:"outlined",onChange:function(e){return s(e.target.value)}}))}})}),Object(g.jsx)("li",{id:"depth-feild",children:Object(g.jsx)(O.a,{id:"depth-text-field",label:"depth",variant:"outlined",onChange:function(e){return c=e.target.value},style:{maxWidth:74}})}),Object(g.jsx)("li",{children:Object(g.jsx)(x.a,{id:"render-button",variant:"outlined",onClick:function(){return t(n,c)},children:"Render"})})]})}n(64);var k=function(e){var t=e.node.id.replace(" ","_");return Object(g.jsx)("div",{id:"preview",children:Object(g.jsx)("iframe",{id:"preview-panel",src:"".concat("https://en.m.wikipedia.org/wiki","/").concat(t),title:"Preview Page"})})};n(65);var y=function(){var e=a.a.useState(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=a.a.useState(2),i=Object(l.a)(c,2),u=i[0],h=i[1],j=a.a.useState([]),b=Object(l.a)(j,2),O=b[0],x=b[1],v=a.a.useState(null),y=Object(l.a)(v,2),m=y[0],S=y[1],E=new Map,G=function(){var e=Object(p.a)(o.a.mark((function e(t,r){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.reduce((function(e,t){return E.has(t.title)||(E.set(t.title,t),e.push(Object(g.jsx)(f.ForceGraphNode,{node:{id:t.title,pageid:t.pageid}}))),e}),[]);case 2:return a=e.sent,e.next=5,r.map((function(e){return Object(g.jsx)(f.ForceGraphLink,{link:{source:e[0],target:e[1]}})}));case 5:c=e.sent,x((function(e){return 0!==e.length?e.push.apply(e,Object(s.a)(a).concat(Object(s.a)(c))):e.push.apply(e,[Object(g.jsx)(f.ForceGraphNode,{node:{id:n.title},fill:"red"})].concat(Object(s.a)(a),Object(s.a)(c))),e}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(o.a.mark((function e(t,n){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){var e=Object(p.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t.pageid);case 2:return n=e.sent,r=[],a=[],n.forEach((function(e){r.push(e),a.push([e.title,t.title])})),e.abrupt("return",[r,a]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=[t],c=0;case 3:if(!(c<n)){e.next=10;break}return e.next=6,a.reduce(function(){var e=Object(p.a)(o.a.mark((function e(t,n){var a,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return n=e.sent,e.next=5,r(n);case 5:return a=e.sent,c=Object(l.a)(a,2),i=c[0],u=c[1],G(i,u),e.next=12,t;case 12:return(t=e.sent).push(i),e.abrupt("return",t.flat());case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]);case 6:a=e.sent;case 7:c++,e.next=3;break;case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return a.a.useEffect((function(){return n?q(n,u):null}),[n]),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"search-bar",children:Object(g.jsx)(w,{setGraphData:function(e,t){r(e),h(t)}})}),Object(g.jsxs)("div",{id:"graph-information",style:{textAlign:"center"},children:[m?Object(g.jsx)(k,{node:m}):null,0!==O.length?Object(g.jsx)(f.InteractiveForceGraph,{onSelectNode:function(e,t){return S(t)},simulationOptions:{animate:!0},children:O}):console.log("Graph not rendered")]})]})};i.a.render(Object(g.jsx)(y,{}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.bb251380.chunk.js.map